# Doc O'clock: A Telemedicine Mobile Application in Kenya

## Description

Doc O’Clock is a telemedicine and USSD-based healthcare system that connects patients and doctors through a mobile app and a web-based admin dashboard. The users (patients) can book appointments based on the dates that are convenient to them among the available list, edit and delete them, and make payments for the consultations beforehand. They can hold a virtual consultation via either video or voice call, view the electronic health records (EHRs), receive the e-prescription issues by the doctor after the  consultation and order the medicine through MyDawa to be delivered to their doorstep. As for the doctors, they can view, edit and delete their appointments, hold the virtual consultations, view and edit the patient's EHR accordingly, and issue e-prescriptions once they have come to a disgnosis. As for the admins, there is a web-based dashboard where they can view the usage of both the application and the USSD modules across various periods of time visually, they can export the reports as pdf and also manage the accounts of the users. The USSD module was built to cater for the offline users and caters to both English and Swahili speakers. Its users can book, edit and delete appointments, make payments for the consultations beforehand then receive an SMS notification confirming their booking. The virtual consultations are to be held via voice call and their e-prescriptions and diagnosis are to be issues via text message.

## Dependencies
  - XAMPP 
  - PHP 8+
  - Composer 
  - Ngrok 
  - Africa’s Talking API 
  - TinyPesa API 
  - PHPMailer 
  
## Installation Steps

For the Admin Dashboard:
1. Clone the repository
    https://github.com/Mwende-Kyalo/Doc-oclock/USSD/ussd_dashboard main branch
2. Start Apache and MySQL on Xampp
3. Start Ngrok 
    Authenticate it by adding the authentication token obtained from the website
    On the Ngrok terminal, run  ngrok config add-authtoken $YOUR_TOKEN
    Confirm the port which the local server is running then run     ngrok http [port]
    Copy the link generated by ngrok and paste it on your browser.
4. Set environment variables
5. Install dependencies using composer which can be downloaded from https://getcomposer.org/download/
6. Configure database connections.
7. Run the application.

For the USSD:
1. Clone the repository
    https://github.com/Mwende-Kyalo/Doc-oclock/USSD/ussd_dashboard main branch
2. Create a Sandbox account on Africa's Talking website
3. Under USSD in the Sandbox side navigation bar, click USSD and create a chennel.
4. Run Ngrok and copy the link it has provided and use it as the callback URL when creating the channel.
5. Launch Simulator and connect to your mobile number.
7. Run the application.

For the Mobile Application:
1. Install Visual Studio and set it up.
2. Clone the repository
    https://github.com/Mwende-Kyalo/Doc-oclock/USSD/ussd_dashboard main branch
3. Run the flutter run command
4. Run the application

## Inputs and Outputs
a) Inputs:
- USSD menu selection numbers
- Log in credentials
    
b) Outputs:
- USSD menu selection options based on the choices made
- Dashboard visualizations and pdf reports
- SMS confirmations
    
## Codebase Organization
a) For the admin dashboard and the USSD functionalities:

    USSD/
    │
    ├── assets/
    │   └── logo.png                  # Application logo
    │
    ├── config/
    │   ├── smtp.php          # Example SMTP configuration 
    │
    ├── css/
    │   └── style.css                 # Main stylesheet for the dashboard UI
    │
    ├── js/
    │   ├── chart.js                  # Chart visualization for analytics
    │   ├── dashboard.js              # Handles dashboard interactivity
    │   ├── data_fetcher.js           # Fetches data via AJAX calls
    │   └── jspdf.umd.min.js          # PDF export library
    │
    ├── vendor/                       # Composer dependencies (e.g., PHPMailer)
    │
    ├── dashboard.php                 # Main admin dashboard page
    ├── db_connect.php                # Database connection file
    ├── export_pdf.php                # Exports data into PDF
    ├── fetch_data.php                # AJAX handler for dynamic data loading
    ├── functions.php                 # Utility and helper functions
    ├── index.php                     # Entry point for the USSD/SMS backend
    ├── login.php                     # Admin/doctor login page
    ├── logout.php                    # Ends session and redirects to login
    ├── mobile_dashboard.php          # Mobile-responsive dashboard version
    ├── signup.php                    # New user registration page
    ├── verify.php                    # Email verification logic
    ├── SMTP_REQUIREMENTS.md          # Notes on setting up PHPMailer SMTP
    ├── composer.json                 # PHP dependencies and autoload info
    ├── composer.lock
    └── .gitignore                    # Ignored files (vendor, config secrets, etc.)
    
b) For the Mobile Application

```
lib/
│
├── config/
│   ├── api_config.dart          # API configuration (see api_config.example.dart)
│   └── api_config.example.dart  # Example API configuration template
│
├── l10n/                        # Localization files (English & Swahili)
│   ├── app_en.arb
│   └── app_sw.arb
│
├── models/                      # Data models
│   ├── appointment_model.dart
│   ├── availability_model.dart
│   ├── call_history_model.dart
│   ├── doctor_model.dart
│   ├── ehr_model.dart
│   ├── message_model.dart
│   ├── payment_model.dart
│   ├── prescription_model.dart
│   ├── rating_review_model.dart
│   └── user_model.dart
│
├── providers/                    # State management (Riverpod/Provider)
│   ├── appointment_provider.dart
│   ├── auth_provider.dart
│   ├── ehr_provider.dart
│   ├── prescription_provider.dart
│   └── settings_provider.dart
│
├── routes/
│   └── app_router.dart          # App routing configuration
│
├── screens/
│   ├── auth/                    # Authentication screens
│   ├── doctor/                  # Doctor-specific screens
│   └── patient/                 # Patient-specific screens
│
├── services/                    # Business logic and API services
│   ├── appointment_service.dart
│   ├── call_history_service.dart
│   ├── doctor_service.dart
│   ├── ehr_service.dart
│   ├── email_notification_service.dart
│   ├── google_calendar_service.dart
│   ├── google_sign_in_service.dart
│   ├── gpt_medicine_service.dart
│   ├── message_service.dart
│   ├── patient_service.dart
│   ├── payment_service.dart
│   ├── prescription_service.dart
│   ├── rating_review_service.dart
│   ├── supabase_auth_service.dart
│   └── tinypesa_service.dart
│
├── theme/
│   └── app_theme.dart           # App theme configuration
│
├── widgets/                      # Reusable widgets
│   ├── doctor_drawer.dart
│   ├── doctor_scaffold.dart
│   ├── patient_drawer.dart
│   └── patient_scaffold.dart
│
└── main.dart                     # App entry point
```
